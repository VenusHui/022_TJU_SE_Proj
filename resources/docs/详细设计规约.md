

# 详细设计规约文档



修订历史记录：

| **编写日期** | **SEPG** | **版本** | **说明** | **作者** | **。。。。** |
| ------------ | -------- | -------- | -------- | -------- | ------------ |
|              |          |          |          |          |              |
|              |          |          |          |          |              |
|              |          |          |          |          |              |



[toc]



## 1	引言

### 1.1	编写目的

本文档用于细化饭饭系统的详细设计，我们将通过微服务设计、接口设计、类详细设计三个角度规范饭饭系统开发中的编码方向、不同微服务之间的接口调用以及方法设计等。

### 1.2	背景与依据

### 1.3	参考资料



## 2	系统软件结构

### 2.1. 系统总体架构设计

本项目采用了API主导的微服务架构，将用户登录注册、智能推荐、反馈、用户偏好、菜品管理等不同的功能集合划分到不同的服务之中，其架构设计如下图所示：

![Architecture](resources/Architecture.png)

### 2.2 系统软件结构设计





## 3	微服务设计

### 3.1  微服务功能

​	饭饭总体划分为4个微服务，登录注册微服务、用户信息管理微服务、菜品管理微服务、用户偏好管理微服务。

#### 3.1.1. 登录注册微服务

​		登录注册微服务提供统一的后端访问入口，控制筛选token、开放接口以保证安全性，同时负责用户的登录和注册功能。其他微服务在登录注册微服务中注册，通过其完成对外交互以及内部的相互调用。

#### 3.1.2. 用户信息管理微服务

​		用户信息管理微服务负责用户的基本信息管理，包括用户个人信息修改、密码修改、用户注销等。

#### 3.1.3. 菜品管理微服务

​		菜品管理微服务主要负责两大部分功能，菜品维护以及评论功能，具体包括菜品的增删改查，对菜品的评价、评分等。

#### 3.1.4. 用户偏好管理微服务

​		用户偏好管理微服务主要负责基本偏好管理、用户画像建立和个性化推荐功能，包括个人偏好的增删改查，用户操作数据反馈、推荐模型调用等。

### 3.2  微服务交互

​		登录注册微服务提供统一的访问入口，所有微服务只和登录注册微服务进行直接交互，且每次对后端的请求需要经过登录注册微服务的身份以及接口验证。同时所有微服务注册在登录注册微服务，每个微服务之间的交互不直接进行，通过请求登录注册微服务再调用其他微服务完成。



## 4	类设计

### 4.1 用户信息管理微服务

主要的实体类为User，通过控制类UserCotroller完成用户信息的设置、获取以及用户的注销等功能管理。如下图所示：

![](./resources/DesignClasses/User.png)

下面详细介绍重要类的描述。

#### 4.1.1 User类

##### 4.1.1.1 功能

用户信息管理微服务的User类主要负责记录用户的个人信息，并且通过内部的方法实现信息修改和查询、注销等。

##### 4.1.1.2 输入项

用户初始建立时个人信息初始化为昵称为学号+同学，修改密码时，需要提供新、旧两个密码进行验证。

##### 4.1.1.3 输出项

##### 4.1.1.5 属性和方法描述



### 4.1 功能

### 4.2 性能（可能不考虑）

### 4.3 输入项（输入接口）

### 4.4 输出项（输出接口）

### 4.5 属性详细描述

### 4.6 方法详细描述及实现流程

### 4.7 类内、类外方法调用状态图

### 4.8 限制条件及出错处理